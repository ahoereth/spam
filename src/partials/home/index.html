<!-- demo warning -->
<div class="alert alert-warning" ng-if="username=='demo'">
  You are currently viewing the live demo. To make sustaining changes please log in with your own credentials!
</div>

<h1>
  {{user.username}}'s overview
  <span
    class="glyphicon lead"
    ng-class="{'glyphicon-heart'       :  overview.facts.bscFieldsCount,
               'glyphicon-refresh spin': !overview.facts.bscFieldsCount}"
  ></span>
</h1>

<div>
  <!-- already enrolled in some courses -->
  <p class="lead" ng-if="overview.courses.length">
    <span ng-show="overview.facts.grades.overall && overview.facts.credits.passed">
      You earned a total of <strong>{{overview.facts.credits.passed}} credits</strong> with the <strong>average grade {{overview.facts.grades.overall}}</strong>. <!--Of those a total of {{overview.facts.credits.overflow}} credits cannot be accounted for in your bachelor.-->
    </span>

    <!-- enrolled ects -->
    <span ng-show="overview.facts.credits.enrolled">The courses you are currently <abbr tooltips tooltip-title="not passed, not failed and neither muted nor overflowing">enrolled</abbr> in promise&nbsp;
    <ng-pluralize
      count="overview.facts.credits.enrolled"
      when="{'1': 'one credit',
             'other': '{} credits'}"
    ></ng-pluralize>.</span>

    <!-- Add notice about overflowing credits. -->

    <!-- Add notice about amount of credits to be collected by the end of the second semester -->

    <!-- bachelor grade -->
    <span ng-if="overview.facts.grades.bachelor">
      Presumably you will have something around a <strong>{{overview.facts.grades.bachelor}} bachelor grade</strong>.
    </span>

    <span ng-if="!overview.thesis.active">
      <abbr class="undercover" ng-click="overview.thesis.active=!overview.thesis.active">
        You did not yet write your bachelor thesis
      </abbr>{{overview.facts.bscFieldsCount>overview.facts.bscFieldsCompletedCount | iif : ' and ' : '.'}}
    </span>

    <span ng-if="overview.facts.bscFieldsCount>overview.facts.bscFieldsCompletedCount">
      {{overview.thesis.active | iif:'B':'b'}}y now {{overview.thesis.active | iif : 'you ' : ''}} completed {{overview.facts.bscFieldsCompletedCount}} of {{overview.facts.bscFieldsCount}} <abbr tooltips tooltip-title="You need to complete the compulsory part of all fields but the optional-compulsory part only of 5 of those.">optional-compulsory</abbr> fields.
    </span>
  </p>

  <!-- no courses yet -->
  <p class="lead" ng-if="overview.user.mat_verify&&overview.courses.length==0">
    You have not yet added any courses.
    To do so you can use the <span class="text-success">quick search</span> in the top right of this page, browse the more specifically filterable <a ng-href="courses?regulation={{overview.user.regulation_id}}&timeframe=11%2B}">course index</a> or take a look at the <a href="guide">study guide</a>.
    Alternatively I can also give you a head start by adding the typical courses for your first semester: <button class="btn btn-primary" ng-click="overview.headstart()">Initialize</button>
  </p>

  <!-- verify enrollment semester -->
  <div ng-if="!overview.user.mat_verify">
    <hr ng-if="overview.courses.length">
    <p class="lead">Please verify your matriculation semester:</p>
    <matriculation-setter verify></matriculation-setter>
    <br>
  </div>
</div>

<!-- bachelor thesis row -->
<div ng-show="overview.thesis.active">
  <hr>

  <form class="inline-form row">
    <div class="form-group col-lg-10 col-sm-9 col-xs-8">
      <input
        type="text"
        class="form-control"
        blur-on-enter
        placeholder="Bachelor thesis title"
        ng-model="overview.thesis.title"
        ng-blur="overview.thesisChange()"
      />
    </div>

    <div class="form-group col-lg-2 col-sm-3 col-xs-4">
      <input
        type="text"
        class="form-control form-control-tight"
        blur-on-enter
        placeholder="Grade"
        onclick="select()"
        ng-model="overview.thesis.grade"
        ng-blur="overview.thesisChange()"
      />
    </div>
  </form>
</div>


<!-- the fields -->
<div class="overview-container row" ng-show="overview.user.mat_verify">

  <hr>

  <!-- left column (lg/md/sm) -->
  <div class="col-lg-4 col-sm-6 col-xs-12">
    <field
      ng-repeat="field in overview.fields track by field.field_id"
      ng-if="($index % 3 == 0) || ($index % 3 == 2 && $odd)"
      ng-class="{'hidden-lg': $index % 3 == 2 && $odd}"
      field="field"
    >
      <course
        ng-repeat="course in overview.courses |
                   filter:{enrolled_field_id: field.field_id}:true"
        course="course"
      ></course>
    </field>
  </div>

  <!-- center (lg) or right column (md/sm) -->
  <div class="col-lg-4 col-sm-6 col-xs-12">
    <field
      ng-repeat="field in overview.fields track by field.field_id"
      ng-if="($index % 3 == 1) || ($index % 3 == 2 && $even)"
      ng-class="{'hidden-lg': $index % 3 == 2 && $even}"
      field="field"
    >
      <course
        ng-repeat="course in overview.courses |
                   filter:{enrolled_field_id: field.field_id}:true"
        course="course"
      ></course>
    </field>
  </div>

  <!-- right column (lg) -->
  <div class="col-lg-4 visible-lg-block">
    <field
      ng-repeat="field in overview.fields track by field.field_id"
      ng-if="$index % 3 == 2"
      field="field"
    >
      <course
        ng-repeat="course in overview.courses |
                   filter:{enrolled_field_id: field.field_id}:true"
        course="course"
      ></course>
    </field>
  </div>

</div>

<hr>

<!-- legend -->
<p class="pull-right" ng-show="overview.user.mat_verify">
  <small>
    <span class="text-primary glyphicon glyphicon-pencil"></span> Current,&nbsp;
    <span class="text-success glyphicon glyphicon-ok"></span> Completed,&nbsp;
    <span class="text-danger glyphicon glyphicon-remove"></span> Failed
  </small>
</p>

<p class="hidden-xs hidden-sm">
  <small>
    {{overview.user.regulation}}
  </small>
</p>
