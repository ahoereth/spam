<h1>Settings</h1>

<hr>

<form class="form-horizontal">

  <!-- student's name -->
  <div class="form-group row">
    <label class="control-label col-md-2" for="firstname">Name</label>
    <div class="col-md-5">
      <!-- first name input -->
      <input
        type="text"
        id="firstname"
        class="form-control"
        placeholder="Firstname"
        blur-on-enter
        instafocus
        ng-model="settings.user.firstname"
        ng-model-options="{updateOn: 'blur'}">
    </div>
    <div class="col-md-5">
      <!-- last name input -->
      <input
        type="text"
        id="lastname"
        class="form-control"
        placeholder="Lastname"
        blur-on-enter
        ng-model="settings.user.lastname"
        ng-model-options="{updateOn: 'blur'}">
    </div>
  </div>

  <!-- student's immatriculation -->
  <div class="form-group row">
    <label class="control-label col-md-2">CogSci since</label>
    <div class="col-md-10"><matriculation-setter></matriculation-setter></div>
  </div>

  <!-- student's study regulation -->
  <div class="form-group row">
    <label class="control-label col-md-2" for="regulation">Regulation</label>
    <div class="col-md-10">
      <select class="form-control" id="regulation" disabled="disabled">
        <option selected="selected">{{::settings.user.regulation}}</option>
      </select>
    </div>
  </div>

</form>

<hr>

<div class="btn-group btn-group-justified">
  <!-- export data -->
  <a
    class="btn btn-info hidden-xs hidden-sm"
    ng-click="settings.export.init()"
    ng-disabled="settings.export.loading"
    ng-if="!settings.export.data"
    ng-bind="settings.export.loading | iif : 'Preparing...' : 'Export Data'"
    tooltips
    tooltip-html="Requires a <a href='http://caniuse.com/#feat=download' target='_blank'>modern browser</a>."
  ></a>

  <a
    class="btn btn-success hidden-xs hidden-sm"
    ng-if="settings.export.data"
    download="{{::settings.user.username}}.json"
    ng-href="{{settings.export.data | textDownload}}"
    tooltips
    tooltip-html="Doesn't work? Get <a href='http://caniuse.com/#feat=download' target='blank'>more info</a>."
    tooltip-show-trigger="mouseover click"
    tooltip-hide-trigger="click"
  >
    Download personal data
  </a>

  <!-- delete account -->
  <a class="btn btn-default"
     ng-click="settings.showDelete = true"
     ng-hide="settings.showDelete">
    Delete all my data
  </a>
  <a class="btn btn-warning"
     ng-click="settings.showDelete2 = true"
     ng-show="settings.showDelete && !settings.showDelete2">
    Delete all my data, for sure!
  </a>
  <a class="btn btn-danger"
     ng-click="settings.deleteUser()"
     ng-show="settings.showDelete2">
    Delete all my data, for really sure!
  </a>
</div>
