<div
  class="navbar navbar-fixed-top navbar-default"
  ng-mouseover="navbar.search.hover = true"
  ng-mouseout=" navbar.search.hover = false"
>

  <!-- animated loader -->
  <div class="loader">
    <div class="container">
      <div class="loadingbar" ng-class="{visible: navbar.showLoader}"></div>
    </div>
  </div>


  <!-- top navigation bar -->
  <div class="container">

    <!-- SPAM icon text and home link + navbar-toggle for small devices -->
    <div class="navbar-header">
      <button
        type="button"
        class="navbar-toggle"
        ng-click="navbar.navExpanded = !navbar.navExpanded"
      >
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="." class="navbar-brand pointer">SPAM</a>
    </div>

    <div class="navbar-collapse collapse" ng-class="{in: navbar.navExpanded}">
      <ul class="nav navbar-nav">
        <li ng-class="navbar.getNavigationActiveClass('/courses')">
          <a
            href="courses"
            ng-href="courses?regulation={{user.regulation_id
              | iif : user.regulation_id : 1}}&timeframe=13%2B"
          >
            courses
          </a>
        </li>

        <li ng-class="navbar.getNavigationActiveClass('/guide')">
          <a href="guide">guide</a>
        </li>

        <li
          ng-class="navbar.getNavigationActiveClass('/~')"
          ng-hide="!navbar.user || navbar.user.role != 'student'"
        >
          <a href="~" ng-bind="navbar.user.username"></a>
        </li>

        <li
          ng-class="navbar.getNavigationActiveClass('/admin')"
          ng-if="navbar.user.rank >= 16"
        >
          <a href="admin">admin</a>
        </li>
      </ul>

      <form class="navbar-form navbar-right hidden-xs">
        <input
          type="text"
          class="form-control"
          placeholder="{{navbar.search.placeholder}}"
          ng-model="navbar.search.query"
          ng-model-options="{debounce: 200}"
          ng-focus="navbar.search.focus = true"
          ng-blur="navbar.search.focus = false">
      </form>
    </div>
  </div>

  <!-- quick search section -->
  <div
    class="container quicksearch"
    ng-if="navbar.search.active && 0 < navbar.search.filtered.length"
    style="background: #fff;">


    <!-- quick search result rows -->
    <div
      class="row hidden-xs"
      ng-repeat="course in navbar.search.filtered track by course.course_id"
    >
      <!-- course code -->
      <div class="col-sm-1 hidden-xs"><code>{{::course.code}}</code></div>

      <!-- course name -->
      <div class="col-sm-4 col-xs-6 course-title">
        <a
          ng-href="/courses/{{::course.course_id}}"
          ng-bind-html="::course.course | highlight: search.filter.course"
        ></a>
      </div>

      <!-- course year/term -->
      <div class="col-sm-1 col-xs-2" style="text-align: right;">
        {{::course.term}}{{::course.year | year}}
      </div>

      <!-- teachers -->
      <div class="col-sm-2 hidden-xs" ng-bind="::course.teachers_str"></div>

      <!-- fields -->
      <div class="col-sm-4 col-xs-7 hidden-xs" ng-hide="navbar.user">{{::course.fields_str}}</div>
      <div class="col-sm-3 col-xs-5 hidden-xs" ng-show="navbar.user">{{::course.fields_str}}</div>

      <!-- add/remove + details buttons -->
      <div class="col-sm-1 col-xs-2" ng-show="navbar.user">
        <add-remove-course course="course" btn-class="btn-block">
        </add-remove-course>
      </div>
    </div>
  </div><!--/quick search section -->
</div>
